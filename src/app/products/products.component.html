<div class="products-container">
  <div class="products-header">
    <h1>Products</h1>
    <button mat-raised-button color="primary" (click)="onAddProduct()">
      <mat-icon>add</mat-icon>
      Add Product
    </button>
  </div>

  <div class="filters">
    <mat-form-field appearance="outline">
      <mat-label></mat-label>
      <input matInput 
             placeholder="Search by name, SKU, or brand"
             [(ngModel)]="searchTerm"
             (input)="onSearchChange($any($event.target).value)">
      <mat-icon matSuffix>search</mat-icon>
    </mat-form-field>
  </div>

  <div *ngIf="loading" class="loading">
    <mat-spinner></mat-spinner>
  </div>

  <div *ngIf="!loading && filteredProducts.length === 0" class="no-results">
    <mat-icon>search_off</mat-icon>
    <p>No products found matching "{{ searchTerm }}"</p>
  </div>

  <div *ngIf="!loading && filteredProducts.length > 0" class="products-grid">
    <mat-card *ngFor="let product of filteredProducts" class="product-card">
      <div class="product-image-container">
        <img mat-card-image [src]="product.image" [alt]="product.name" 
             onerror="this.src='https://via.placeholder.com/300x200?text=No+Image'">
        <mat-chip *ngIf="product.isFeatured" class="featured-badge">Featured</mat-chip>
        <mat-chip [ngClass]="getStockClass(product)" class="stock-badge">
          {{ getStockStatus(product) }}
        </mat-chip>
      </div>
      
      <mat-card-header>
        <mat-card-title>{{ product.name }}</mat-card-title>
        <mat-card-subtitle>{{ product.brand }} | SKU: {{ product.sku }}</mat-card-subtitle>
      </mat-card-header>
      
      <mat-card-content>
        <p class="description">{{ product.description }}</p>
        
        <div class="product-info">
          <div class="info-row">
            <span class="label">Category:</span>
            <span>{{ product.category }} > {{ product.subcategory }}</span>
          </div>
          
          <div class="info-row">
            <span class="label">Price:</span>
            <span class="price">${{ product.price }}</span>
            <span *ngIf="product.compareAtPrice" class="compare-price">
              ${{ product.compareAtPrice }}
            </span>
          </div>
          
          <div class="info-row">
            <span class="label">Stock:</span>
            <span>{{ product.stock }} units</span>
          </div>
          
          <div class="info-row">
            <span class="label">Rating:</span>
            <span>
              <mat-icon class="rating-icon">star</mat-icon>
              {{ product.rating }} ({{ product.reviewCount }} reviews)
            </span>
          </div>
        </div>

        <div class="tags">
          <mat-chip-list>
            <mat-chip *ngFor="let tag of product.tags.slice(0, 3)">
                {{ tag }}
            </mat-chip>
          </mat-chip-list>
        </div>
      </mat-card-content>
      
      <mat-card-actions>
        <button mat-button color="primary" (click)="onEdit(product)">
          <mat-icon>edit</mat-icon>
          Edit
        </button>
        <button mat-button color="accent" (click)="onView(product)">
          <mat-icon>visibility</mat-icon>
          View
        </button>
        <button mat-button color="warn" (click)="onDelete(product)">
          <mat-icon>delete</mat-icon>
          Delete
        </button>
      </mat-card-actions>
    </mat-card>
  </div>
</div>
